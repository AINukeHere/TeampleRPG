<!DOCTYPE html>
<html>
    <head>
        <title>
            팀플RPG 공식 사이트
        </title>
        <style type="text/css">
            @import url("index.css");
        </style>
    </head>
    <body>
        <header id = "title">
            <h1>팀플RPG의 모든것</h1>
            <h2>팀플RPG 정보공유 사이트 test</h2>
        </header>
        <hr>
        <div id="classView" class="classView">
            <script>
                var request = new XMLHttpRequest();
                request.open("GET", "https://raw.githubusercontent.com/AINukeHere/TeampleRPG/main/data/class_info.json", false);
                //request.overrideMimeType("application/json");
                // request.onreadystatechange = function(){
                //     console.log(request.response);
                // }
                // request.open("GET", "data/class_info.json", true);
                request.send(null)
                var my_JSON_object = JSON.parse(request.responseText);

                for(var i =0; i < my_JSON_object.classes.length; ++i){
                    document.writeln("<a class='classProfile' href='#' onmousemove='showClassInfo("+i+")' onmouseout='hideClassInfo(this)'>\
                        <img class='classProfileImage' src=./data/"+my_JSON_object.classes[i].image+">");
                    document.writeln(my_JSON_object.classes[i].name+"</a>");
                }
                document.addEventListener('mousemove', setInfoPosition);
                function setInfoPosition(event)
                {
                    var classInfo = document.getElementById("classInfo");
                    classInfo.style.left=(event.clientX+5).toString()+"px";
                    classInfo.style.top=(event.clientY+5).toString()+"px";
                    //console.log(event.clientX, event.clientY);
                }
                function showClassInfo(classIdx)
                {
                    var posx = 0;
                    var posy = 0;
                    if (!e)
                        var e = window.event;
                    if (e.pageX || e.pageY) {
                        posx = e.pageX;
                        posy = e.pageY;
                    } else if (e.clientX || e.clientY) {
                        posx = e.clientX + document.body.scrollLeft + document.documentElement.scrollLeft;
                        posy = e.clientY + document.body.scrollTop + document.documentElement.scrollTop;
                    }
                    var classInfo = document.getElementById("classInfo");
                    classInfo.style.opacity=1;
                    classInfo.children[0].innerHTML = my_JSON_object.classes[classIdx].explanation;
                    classInfo.children[1].src = 'data/'+my_JSON_object.classes[classIdx].image;
                }
                function hideClassInfo(obj)
                {
                    var classInfo = document.getElementById("classInfo");
                    classInfo.style.opacity=0;
                    classInfo.style.left="0px";
                    classInfo.style.top="0px";
                }
            </script>
            <div id="classInfo" class='classInfo' style="opacity: 0;">
                <p name="classExplanation">
                    캐릭터를 설명하는 중...
                </p>
                <img src='data/dummy.png'>
            </div>
        </div>
        <hr>
        <button>직업 보기</button>
    </body>
</html>